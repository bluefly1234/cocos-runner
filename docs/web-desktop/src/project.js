window.__require=function t(e,i,n){function s(c,a){if(!i[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var u="function"==typeof __require&&__require;if(!a&&u)return u(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var d=i[c]={exports:{}};e[c][0].call(d.exports,function(t){return s(e[c][1][t]||t)},d,d.exports,t,e,i,n)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)s(n[c]);return s}({Background:[function(t,e,i){"use strict";cc._RF.push(e,"6648ckFH8xDW5GUHt29Ch+d","Background"),cc.Class({extends:cc.Component,properties:{speed:50},update:function(t){var e=this;this.node.children.forEach(function(i){e.move(i,t*e.speed)})},move:function(t,e){t.x+t.width/2<=-cc.winSize.width/2?t.x+=2*t.width-e:t.x-=e}}),cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"01028a6EVZJn7lFveTPgesQ","Game");var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./Globals"));cc.Class({extends:cc.Component,properties:{hero:{default:null,type:cc.Node},score:{default:null,type:cc.Label},music:{default:null,type:cc.AudioClip},sound:{default:null,type:cc.AudioClip}},onLoad:function(){var t=this;this.startPlayMusic(),this.enablePhysics(),this.enableCollision(),this.hero.on("score",function(){t.handleAddScore()}),this.hero.once("die",function(){cc.director.loadScene("Score")})},enablePhysics:function(){cc.director.getPhysicsManager().enabled=!0},enableCollision:function(){cc.director.getCollisionManager().enabled=!0},enablePhysicsDebug:function(){cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit},handleAddScore:function(){cc.audioEngine.play(this.sound),n.default.score++,this.score.string=n.default.score.toString()},startPlayMusic:function(){cc.audioEngine.isMusicPlaying()||cc.audioEngine.playMusic(this.music,!0)},start:function(){n.default.score=0},onDestroy:function(){cc.audioEngine.stopMusic()}}),cc._RF.pop()},{"./Globals":"Globals"}],Globals:[function(t,e,i){"use strict";cc._RF.push(e,"3fa0bI1av1DM7LO1XPzBM+T","Globals"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default={score:0},e.exports=i.default,cc._RF.pop()},{}],Hero:[function(t,e,i){"use strict";cc._RF.push(e,"aac01haRFJI66NtNrOVnuE2","Hero"),cc.Class({extends:cc.Component,properties:{jumpSpeed:cc.v2({x:0,y:300}),maxJumpDistance:100,jumpSprite:{default:null,type:cc.SpriteFrame}},onListenerEvent:function(){var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(e.keyCode){case cc.macro.KEY.space:t.isJumpKeyPressed=!0}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){switch(e.keyCode){case cc.macro.KEY.space:t.isJumping=!1,t.isJumpKeyPressed=!1}}),this.node.parent.on(cc.Node.EventType.TOUCH_START,function(){t.isJumpKeyPressed=!0}),this.node.parent.on(cc.Node.EventType.TOUCH_END,function(){t.isJumping=!1,t.isJumpKeyPressed=!1})},onLoad:function(){this.onListenerEvent()},start:function(){this.animation=this.node.getComponent(cc.Animation),this.sprite=this.node.getComponent(cc.Sprite),this.body=this.getComponent(cc.RigidBody),this.isOnGround=!1,this.isJumping=!1,this.isJumpFinished=!1,this.isJumpKeyPressed=!1,this.startJumpY=null},onBeginContact:function(){this.isOnGround=!0},onEndContact:function(){this.isOnGround=!1},onCollisionEnter:function(t,e){"diamond"===t.node.name&&(t.node.destroy(),this.node.emit("score"))},update:function(t){this.isJumpKeyPressed&&this.jump(),this.animate(),this.node.y<-cc.winSize.height/2&&this.node.emit("die")},jump:function(){if(this.isOnGround)this.startJumpY=this.node.y,this.isJumpFinished=!1,this.isJumping=!0,this.body.linearVelocity=this.jumpSpeed;else if(this.isJumping&&!this.isJumpFinished){this.node.y-this.startJumpY<this.maxJumpDistance?this.body.linearVelocity=this.jumpSpeed:this.isJumpFinished=!0}},animate:function(){var t=this.animation.getAnimationState("running").isPlaying;this.isOnGround&&!t&&this.animation.start("running"),!this.isOnGround&&t&&(this.animation.stop(),this.sprite.spriteFrame=this.jumpSprite)}}),cc._RF.pop()},{}],Platforms:[function(t,e,i){"use strict";cc._RF.push(e,"a7bbdHE+cJNH6ZFUo57hn3Z","Platforms");var n=t("../utils/index");cc.Class({extends:cc.Component,properties:{platform:{default:null,type:cc.Prefab},tilesCountMin:2,tilesCountMax:6,xOffsetMin:60,xOffsetMax:150,yOffsetMin:-300,yOffsetMax:300},onLoad:function(){},start:function(){this.platforms=[],this.createPlatform({tilesCount:4,x:-200,y:-200})},update:function(t){this.isPlatformOnRight()&&this.createPlatform()},isPlatformOnRight:function(){var t=cc.winSize.width/2;return this.current.node.x+this.current.node.width<t},generateRandomData:function(){var t={tilesCount:0,x:0,y:0},e=(0,n.getLimitRandom)(this.tilesCountMin,this.tilesCountMax);t.tilesCount=e;var i=(0,n.getLimitRandom)(this.xOffsetMin,this.xOffsetMax);t.x=this.current.node.x+this.current.node.width+i;var s=(0,n.getLimitRandom)(this.yOffsetMin,this.yOffsetMax),o=cc.winSize.height/2,c=-cc.winSize.height/2,a=this.current.node.y+s;return a=Math.min(a,o-2*this.current.node.height),a=Math.max(a,c+this.current.node.height),t.y=a,t},createPlatform:function(t){t||(t=this.generateRandomData());var e=this.platforms.find(function(t){return!t.active});if(e)this.current=e;else{var i=cc.instantiate(this.platform);this.node.addChild(i),this.current=i.getComponent("Platform"),this.platforms.push(this.current)}this.current.init(t.tilesCount,t.x,t.y)}}),cc._RF.pop()},{"../utils/index":"index"}],Platform:[function(t,e,i){"use strict";cc._RF.push(e,"6e192MD2LtGS7XllhqT85Hu","Platform");var n=t("../utils/index");cc.Class({extends:cc.Component,properties:{coinsOffsetMin:100,coinsOffsetMax:200,diamond:{default:null,type:cc.Prefab},tile:{default:null,type:cc.Prefab}},start:function(){},update:function(t){this.active&&(this.node.x-=150*t,this.isPlatformOnOutScreen()&&(this.active=!1))},createDiamonds:function(){var t=this,e=(0,n.getLimitRandom)(this.coinsOffsetMin,this.coinsOffsetMax);this.node.children.forEach(function(i){if(Math.random()<=.4){var n=cc.instantiate(t.diamond);i.addChild(n),n.setPosition(0,e)}})},isPlatformOnOutScreen:function(){return this.node.x+this.node.width<-cc.winSize.width/2},init:function(t,e,i){this.active=!0,this.node.removeAllChildren(),this.node.setPosition(cc.v2(e,i));for(var n=0;n<t;n++){var s=cc.instantiate(this.tile);this.node.addChild(s),s.setPosition(n*s.width,0)}this.node.width=64*t,this.node.height=64;var o=this.node.getComponent(cc.PhysicsBoxCollider);o.size.width=this.node.width,o.size.height=this.node.height,o.offset.x=this.node.width/2-32,o.apply(),this.createDiamonds()}}),cc._RF.pop()},{"../utils/index":"index"}],Score:[function(t,e,i){"use strict";cc._RF.push(e,"7ce89k6OzBNQqWOO1HYW4Yr","Score");var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./Globals"));cc.Class({extends:cc.Component,properties:{scoreLabel:{default:null,type:cc.Label}},start:function(){this.scoreLabel.string="Score: ".concat(n.default.score),this.node.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("Game")})}}),cc._RF.pop()},{"./Globals":"Globals"}],index:[function(t,e,i){"use strict";cc._RF.push(e,"bd2c6HVNbxCU7EKnjO6kwjJ","index"),Object.defineProperty(i,"__esModule",{value:!0}),i.getLimitRandom=void 0;i.getLimitRandom=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},cc._RF.pop()},{}]},{},["Background","Game","Globals","Hero","Platform","Platforms","Score","index"]);